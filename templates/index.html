<!Doctype html>
<html lang="en">
<head>
    <title>Shakespeare Quote Generator</title>
      <meta charset="utf-8">
    <!--<link rel=stylesheet type=text/css href="/static/style.css?cache={{time}}">-->
    <link rel="stylesheet" type="text/css" href="static/styles/style.css" />
    <link rel="shortcut icon" href="/static/images/shakespeare-web_0.jpg"/>
</head>
<body style="
    font-family: Helvetica;
    font-size: 18px;
    font-weight: lighter;
    background-color: #d7ded6;
">
<div class="wot-popup-container"></div>
<div id="wrapper">
    <div id="navbar" style="margin: auto; text-align: center; padding: 3px;">
        <img src="/static/images/shakespeare-003.jpg" style="max-height: 50px;">
    </div>

    <img src="static/images/shakespeare-002.jpg" style="max-width: 100%;">

    <div id="quote">
        <div class="header">
        To be, or not to be, that is the question - William Shakespeare
        </div>

        <div class="text">

    <div class="container">
        <p> {{tweet}} </p>
        
        <button class="btn" style="padding:  0.5em 1em;"> Generate Tweet </button>
        <button class="btn"> Favorite </button>
        <button class="btn" type="submit" id="all_favorite_button"> See All Favorites </button>
    </div>


    <div id="about">
        <div class="header">
        </div>
        <br>
        <center><a href="https://github.com/jeffchiucp">This project</a> was made by Jeff Chiu <a href="https://github.com/Jeffchiucp/Python-Tweet-Generator" <="" a=""> using Markov Chains.
        </a></center><a href="https://github.com/Jeffchiucp/Python-Tweet-Generator" <="" a="">
        <right>The Corpus I used was has  lines of text and  words. 
        </right>

        <div>
        </div>
        <div id="favorites">

        </div>
    </a></div><a href="https://github.com/Jeffchiucp/Python-Tweet-Generator" <="" a="">

    <div style="float: left">
        <input placeholder="Sentence Length" id="length">
    </div>
</a></div><a href="https://github.com/Jeffchiucp/Python-Tweet-Generator" <="" a="">


<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<script>
    //create an random to make sure that everytime that I get the tweet and generous
    var id = 0, favorites = [];

    console.log($("#all_favorite_button"));

    $("body").on('click', '#all_favorite_button', function(e){
        console.log("favorite button clicked!!!!!!");
        e.preventDefault();
        refreshSentence();
    });
    /****/
    function refreshSentence() {
        console.log("refreshSentence")
        var length = document.getElementById('length');

        $.post("favorites", { words: length.value }, function(data){
            console.log(data);
        });


        // $.ajax({
        //     url: "new",
        //     method: "post",
        //     contentType: 'application/json',
        //     data: JSON.stringify({
        //         words: length.value
        //     }),
        //     dataType: 'json',
        // }).done(function (object) {
        //     var text = document.getElementById('sentence');
        //     if (object.'success' === true) {
        //         text.innerHTML = '"' + object['data'] + '"';
        //         id = object['id'];
        //         console.log(object['data'])
        //     } else {
        //         alert("Internal Error!");
        //     }
        // });
    }
    function tweet() {
        var length = document.getElementById('length');
        $.ajax({
            url: "tweet",
            method: "post",
            contentType: 'application/json',
            data: JSON.stringify({
                tweet: id
            }),
            dataType: 'json'
        }).done(function (object) {
            var text = document.getElementById('sentence');
            if (object['success'] === true) {
                alert("Tweet Successful");
            } else {
                alert("Internal Error!");
            }
        });
    }
    function favorite() {
        var length = document.getElementById('length');
        $.ajax({
            url: "favorites",
            method: "post",
            contentType: 'application/json',
            data: JSON.stringify({
                tweet: id
            }),
            dataType: 'json'
        }).done(function (object) {
            var text = document.getElementById('favorites');
            if (object['success'] === true) {
                alert("Tweet favorited");
                text.innerHTML += "- " + object['data'] + "<br>"
            } else {
                alert("Tweet already favorited");
            }
        });
    }
    $.ajax({
        url: "favorites",
        method: "GET"
    }).done(function (object) {
        var text = document.getElementById('favorites');
        if (object['success'] === true) {
            for (var i = 0; i < object.data.length; i++) {
                text.innerHTML += "- " + object.data[i] + "<br>"
            }
        } else {
            text.innerHTML = "INTERNAL ERROR!"
        }
    });
</script>